[gd_scene load_steps=2 format=2]

[sub_resource type="GDScript" id=1]
resource_name = "test"
script/source = "extends Node
var wave_points = 2.4
onready var httpRequest = $HTTPRequest

func _ready():
	randomize()

	for i in range(20):
		LootLocker.player_id = ''
		yield(LootLocker.authenticate_guest_session(), 'completed')
		var data = {
		'score': randi()%10000,

		'metadata':'{\"wave\":\"{}\", \"name\": \"{}\"}'.format(['N/A', 'NAME'], \"{}\")}
		
		yield(LootLocker.submit_records(data), 'completed')
	

func generate_waves(num):
	for i in range(num):
		var wave = i
		var wave_total_points = wave_points * float(wave)
		var enemy_list = {
							'asteroids':{'tiny':int(wave_total_points / 2.4) %10,
										'small':int(wave_total_points / 4),
										'med':int(wave_total_points / 6) ,
										'big':int(wave_total_points / 10)},
							'ships':(((wave)/5) if (wave) % 5 == 0 else 0) + (1 if (wave) % 5 != 0 and wave > 10 else 0) }
		
		print(\"Wave: %s, %s\" % [wave, enemy_list])
		
#func _process(delta):
#
#	var RANALOGX = InputEventJoypadMotion.new()
#	RANALOGX.set_axis(JOY_ANALOG_RX)
#	print(RANALOGX.get_axis())
#
##	var RANALOGY = InputEventJoypadMotion.new().set_axis(JOY_ANALOG_RY)
#	print(Vector2(RANALOGX.get_axis_value(), RANALOGY.get_axis_value))
#func _input(event):
#	var velocity = Input.get_vector(\"aim_left\", \"aim_right\", \"aim_up\", \"aim_down\")
#	print(velocity)

"

[node name="Node" type="Node" groups=["Main"]]
script = SubResource( 1 )

[node name="HTTPRequest" type="HTTPRequest" parent="."]
